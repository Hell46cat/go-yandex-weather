# Go Yandex Weather API

![GitHub](https://img.shields.io/github/license/Hell46cat/go-yandex-weather)
![Go Version](https://img.shields.io/github/go-mod/go-version/Hell46cat/go-yandex-weather)

–ü—Ä–æ—Å—Ç–∞—è –∏ —É–¥–æ–±–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞-–∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥—ã –Ω–∞ Go. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥–µ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∞–º –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–æ–¥–∞.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ API –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥—ã
- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤–µ—Ç—Ä–∞
- ‚úÖ –£–¥–æ–±–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–≥–æ–¥–µ
## –ù–∞–≤–∏–≥–∞—Ü–∏—è
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#–£—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–ë—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞](#–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è-–∫–ª–∏–µ–Ω—Ç–∞)
- [–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã](#–ü–æ–ª—É—á–µ–Ω–∏–µ-—Ç–µ–∫—É—â–µ–π-–ø–æ–≥–æ–¥—ã)
- [–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π](#–ü–æ–ª—É—á–µ–Ω–∏-–ø—Ä–æ–≥–Ω–æ–∑–∞-–Ω–∞-–Ω–µ—Å–∫–æ–ª—å–∫–æ-–¥–Ω–µ–π)
- [–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ](#–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-–æ-–ø–æ–≥–æ–¥–µ)
- [–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö](#–°—Ç—Ä—É–∫—Ç—É—Ä—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ü–µ—Ä–µ–≤–æ–¥—ã –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π](#–ü–µ—Ä–µ–≤–æ–¥—ã-–ø–æ–≥–æ–¥–Ω—ã—Ö-—É—Å–ª–æ–≤–∏–π)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ü—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
go get -u github.com/Hell46cat/go-yandex-weather
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```
package main

import (
    "context"
    "fmt"
    "log"
    "time"

    "github.com/Hell46cat/go-yandex-weather"
)

func main() {
    // –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç —Å API-–∫–ª—é—á–æ–º
    client := weather.NewClient("–≤–∞—à-api-–∫–ª—é—á")
    
    // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ú–æ—Å–∫–≤—ã
    lat, lon := 55.7558, 37.6176
    
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º
    ctx, cancel := context.WithTimeout(context.Background(), 5*time.Second)
    defer cancel()
    
    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É
    resp, err := client.GetCurrent(ctx, lat, lon, "ru_RU")
    if err != nil {
        log.Fatalf("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã: %v", err)
    }
    
    // –í—ã–≤–æ–¥–∏–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    fact := resp.Fact
    fmt.Printf("–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: %d¬∞C, %s\n", 
        fact.Temp, 
        weather.TranslateCondition(fact.Condition))
}
```

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
```
// –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
client := weather.NewClient("–≤–∞—à-api-–∫–ª—é—á")

// –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç
httpClient := &http.Client{
    Timeout: 15 * time.Second,
}
client := &weather.Client{
    APIKey:     "–≤–∞—à-api-–∫–ª—é—á",
    HTTPClient: httpClient,
}
```
## –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã
```
// –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
ctx := context.Background()

// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É –¥–ª—è –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞
resp, err := client.GetCurrent(ctx, 59.9386, 30.3141, "ru_RU")
if err != nil {
    log.Fatalf("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã: %v", err)
}

// –†–∞–±–æ—Ç–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏
fmt.Printf("–ü–æ–≥–æ–¥–∞: %d¬∞C, %s\n", 
    resp.Fact.Temp, 
    weather.TranslateCondition(resp.Fact.Condition))
fmt.Printf("–í–µ—Ç–µ—Ä: %s %.1f –º/—Å\n", 
    weather.TranslateWindDirection(resp.Fact.WindDir), 
    resp.Fact.WindSpeed)
```
## –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
```
// –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π —Å –ø–æ—á–∞—Å–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
forecast, err := client.GetForecast(ctx, lat, lon, "ru_RU", 5, true)
if err != nil {
    log.Fatalf("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞: %v", err)
}

// –í—ã–≤–æ–¥–∏–º –ø—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
for i, day := range forecast.Forecasts {
    fmt.Printf("\n–î–µ–Ω—å %d (%s):\n", i+1, day.Date)
    
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–Ω–µ
    dayPart := day.Parts.Day
    fmt.Printf("–î–Ω–µ–º: %d¬∞C (%d¬∞C...%d¬∞C), %s\n", 
        dayPart.TempAvg, 
        dayPart.TempMin, 
        dayPart.TempMax, 
        weather.TranslateCondition(dayPart.Condition))
    
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ—á–∏
    nightPart := day.Parts.Night
    fmt.Printf("–ù–æ—á—å—é: %d¬∞C (%d¬∞C...%d¬∞C), %s\n", 
        nightPart.TempAvg, 
        nightPart.TempMin, 
        nightPart.TempMax, 
        weather.TranslateCondition(nightPart.Condition))
    
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ—Å—Ö–æ–¥–µ –∏ –∑–∞–∫–∞—Ç–µ
    fmt.Printf("–í–æ—Å—Ö–æ–¥: %s, –ó–∞–∫–∞—Ç: %s\n", 
        day.Sunrise, 
        day.Sunset)
    
    // –ï—Å–ª–∏ –±—ã–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω—ã –ø–æ—á–∞—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    if len(day.Hours) > 0 {
        fmt.Println("–ü–æ—á–∞—Å–æ–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑ (–∏–∑–±—Ä–∞–Ω–Ω—ã–µ —á–∞—Å—ã):")
        // –í—ã–≤–æ–¥–∏–º –∫–∞–∂–¥—ã–π —Ç—Ä–µ—Ç–∏–π —á–∞—Å –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏
        for i := 0; i < len(day.Hours); i += 3 {
            hour := day.Hours[i]
            fmt.Printf("  %s:00 - %d¬∞C, %s\n", 
                hour.Hour, 
                hour.Temp, 
                weather.TranslateCondition(hour.Condition))
        }
    }
}
```
## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ
```
// –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–≥–æ–¥—É
resp, err := client.GetCurrent(ctx, lat, lon, "ru_RU")
if err != nil {
    log.Fatalf("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã: %v", err)
}

// –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
formattedWeather := weather.FormatCurrentWeather(resp, "ru_RU")
fmt.Println(formattedWeather)

// –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ-—Å–≤–æ–µ–º—É
fact := resp.Fact
fmt.Printf("üå° –°–µ–π—á–∞—Å: %d¬∞C (%s)\n", 
    fact.Temp, 
    weather.TranslateCondition(fact.Condition))
fmt.Printf("üí® –í–µ—Ç–µ—Ä: %s %.1f –º/—Å\n", 
    weather.TranslateWindDirection(fact.WindDir), 
    fact.WindSpeed)
```
## –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö
–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –ø–æ–ª–µ–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ñ–∞–π–ª–µ models.go
## –ü–µ—Ä–µ–≤–æ–¥—ã –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∫–æ–¥–æ–≤ –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ç—Ä–∞:
```
// –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
condition := weather.TranslateCondition("clear") // "—è—Å–Ω–æ"
condition := weather.TranslateCondition("partly-cloudy") // "–º–∞–ª–æ–æ–±–ª–∞—á–Ω–æ"
condition := weather.TranslateCondition("overcast") // "–ø–∞—Å–º—É—Ä–Ω–æ"

// –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ç—Ä–∞
windDir := weather.TranslateWindDirection("n") // "—Å–µ–≤–µ—Ä–Ω—ã–π"
windDir := weather.TranslateWindDirection("sw") // "—é–≥–æ-–∑–∞–ø–∞–¥–Ω—ã–π"
```
## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ examples: examples/simple/main.go - –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã